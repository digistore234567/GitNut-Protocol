{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gitnut.dev/schemas/project-metadata.schema.json",
  "title": "project-metadata.schema",
  "description": "Canonical project metadata stored off-chain and referenced by on-chain registry records.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "schemaVersion",
    "slug",
    "displayName",
    "repository",
    "licenses",
    "maintainers"
  ],
  "properties": {
    "schemaVersion": {
      "type": "string",
      "enum": [
        "1.0.0"
      ]
    },
    "slug": {
      "type": "string",
      "pattern": "^[a-z0-9]+(?:-[a-z0-9]+){0,39}$"
    },
    "displayName": {
      "type": "string",
      "minLength": 1,
      "maxLength": 120
    },
    "summary": {
      "type": "string",
      "maxLength": 280
    },
    "description": {
      "type": "string",
      "maxLength": 10000
    },
    "repository": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "provider",
        "url"
      ],
      "properties": {
        "provider": {
          "type": "string",
          "enum": [
            "github",
            "gitlab",
            "bitbucket",
            "generic"
          ]
        },
        "url": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "defaultBranch": {
          "type": "string",
          "maxLength": 200
        }
      }
    },
    "homepage": {
      "type": "string",
      "format": "uri",
      "minLength": 1
    },
    "docs": {
      "type": "string",
      "format": "uri",
      "minLength": 1
    },
    "categories": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 60
      },
      "maxItems": 32
    },
    "keywords": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 40
      },
      "maxItems": 64
    },
    "licenses": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 80
      },
      "maxItems": 16
    },
    "maintainers": {
      "type": "array",
      "minItems": 1,
      "maxItems": 64,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "name"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Stable maintainer identifier.",
            "minLength": 3,
            "maxLength": 120
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 120
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "wallet": {
            "type": "string",
            "description": "Solana public key as base58 string.",
            "minLength": 32,
            "maxLength": 64
          },
          "github": {
            "type": "string",
            "maxLength": 120
          },
          "x": {
            "type": "string",
            "pattern": "^[A-Za-z0-9_]{1,15}$"
          },
          "role": {
            "type": "string",
            "enum": [
              "owner",
              "maintainer",
              "publisher",
              "auditor",
              "bot",
              "other"
            ]
          }
        }
      }
    },
    "links": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "x": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "discord": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "telegram": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "mirror": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "medium": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "blog": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        }
      }
    },
    "icon": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "uri": {
          "type": "string",
          "format": "uri",
          "minLength": 1
        },
        "mime": {
          "type": "string",
          "enum": [
            "image/png",
            "image/jpeg",
            "image/svg+xml",
            "image/webp"
          ]
        },
        "sha256": {
          "type": "string",
          "description": "Lowercase hex SHA-256 digest.",
          "pattern": "^[a-f0-9]{64}$"
        }
      }
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    }
  },
  "defs": {
    "semver": {
      "type": "string",
      "description": "Semantic Versioning string.",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-[0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*)?(?:\\+[0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*)?$"
    },
    "sha256": {
      "type": "string",
      "description": "Lowercase hex SHA-256 digest.",
      "pattern": "^[a-f0-9]{64}$"
    },
    "ed25519PublicKey": {
      "type": "string",
      "description": "Ed25519 public key as base58 string.",
      "minLength": 32,
      "maxLength": 64
    },
    "solanaPubkey": {
      "type": "string",
      "description": "Solana public key as base58 string.",
      "minLength": 32,
      "maxLength": 64
    },
    "uri": {
      "type": "string",
      "format": "uri",
      "minLength": 1
    },
    "datetime": {
      "type": "string",
      "format": "date-time"
    }
  }
}